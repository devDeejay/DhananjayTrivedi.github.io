define("modules/clean/accessibility/audit",["require","exports","external/axe","jquery","external/axs_testing"],function(e,t,n,i,r){"use strict";var o=function(){function e(){}return e.ERROR="error",e.WARNING="warning",e}(),a={anchorWithoutHref:{description:"Anchors without href usually aren't keyboard-accessible.     An anchor should have an href attribute pointing to its destination.     If there's no destination, consider using another HTML element.     A good rule of thumb is to use an anchor for navigation and a button     for performing an action. You can style a button to look like a link     with the .button-as-link CSS class.",level:o.ERROR},anchorWithHashHref:{description:"Anchors with href='#' should only be used for navigation     to the top of page or, in some cases, as part of an ARIA widget. Often,     anchors with href='#' should really be HTML buttons. A good rule of thumb     is to use an anchor for navigation and a button for performing an action.     You can style a button to look like a link with the .button-as-link CSS class.",level:o.WARNING},controlWithoutText:{description:"Every anchor, button, and control should contain text so that users know what the element does.",level:o.ERROR},imageWithoutAlt:{description:'Every <img> needs an alt attribute to convey its meaning to     people who may not be able to see it or in case the image doesn\'t load.     For images that are redundant to text next to them, or used for purely decorative     purposes, use alt="". For informational images, provide a short, internationalized string.',level:o.ERROR},inputWithoutLabel:{description:"Every input field needs an associated label so users know what to     enter in the field. Include a visible, non-empty <label> whose for attribute (htmlFor in React)     points to the input field's DOM id.     For example: <label for='book'>Favorite book</label> <input type='text' id='book'/>",level:o.ERROR},labelWithoutInput:{description:"Labels should always be associated with input fields. Associate a label to an     input by giving the input a unique ID and referencing that ID in the label's for attribute (htmlFor in React).     If a label isn't related to any field on the page, it should be replaced with another HTML     element, such as a span, paragraph, or heading.",level:o.WARNING},ungroupedInput:{description:"Related radio inputs and checkboxes (i.e. radios/checkboxes that share a name     with another input field) should always be grouped together in a <fieldset> with a <legend>.",level:o.ERROR},positiveTabIndex:{description:"Using a tabindex value greater than 0 creates unexpected and inconsistent keyboard     navigation. Always prefer keeping elements' tab order in their natural DOM order by removing the     tabindex attribute (for buttons, inputs, and other elements that are natively focusable) or using tabindex='0'.",level:o.WARNING},missingH1:{description:"Every page should have a non-empty H1.",level:o.ERROR},skipLevelHeading:{description:"Headings should always have a logical ordering. Make sure that levels aren't skipped,     i.e. the next heading after an H1 should never be an H3. Remember you can always use CSS to style your     headings the way you want.",level:o.WARNING},unclearLinkText:{description:"Link text should make sense out of context. Prefer specific, descriptive text over     text like 'Learn more' and 'Click here.' This is helpful for assistive technology users, such as     screenreader users who often navigate through lists of links.",level:o.WARNING},tableWithoutHeaders:{description:"Every table should have properly defined headers. Use <th> elements within a <tr> to     identify headers. Use scope='row' or scope='col' to clear up ambiguity about whether <th> is     labelling a column or row. Remember that tables should be used for multi-dimensional data and not     solely for layout.",level:o.ERROR},lowColorContrast:{description:"Text elements should maintain reasonable contrast against background elements so that     they are legible to users across a wide vision spectrum and devices.",linkURL:"https://dropbox.github.io/scooter/functions.html#colors",linkText:"Find WCAG-accessible text colors in the Scooter docs.",level:o.ERROR},documentMissingLanguage:{description:"HTML pages should have a defined default language. Add a lang attribute (HTML)     and/or xml:lang attribute (XHTML 1.0 and 1.1) to this document's HTML tag.     For example, <html lang='en_GB'>.",level:o.ERROR},documentMissingTitle:{description:"Document should have a non-empty <title> inside its <head> element.",level:o.ERROR}},s=function(){function e(e){this.root=e.root||document,this.rulesToCheck=e.rulesToCheck||null,this.selectorsToIgnore=e.selectorsToIgnore||null,this.ignoreDropboxCommon=e.ignoreDropboxCommon||!1,this.onlyVisible=e.onlyVisible||!0,this.includeHeadings=e.includeHeadings||!1}return e}(),l=function(){function e(e){this.config=e,this.ariaHiddenElements=Array.prototype.slice.call(this.config.root.querySelectorAll('*[aria-hidden="true"]'))}return e.prototype.isVisible=function(e){return!!(e.offsetWidth&&e.offsetHeight||e.getClientRects().length)},e.prototype.isAriaHidden=function(e){return"true"===e.getAttribute("aria-hidden")?!0:this.ariaHiddenElements.some(function(t){return t.contains(e)})},e.prototype.shouldInclude=function(e,t){if(e){if(this.config.onlyVisible&&!this.isVisible(e))return!1;if(this.config.selectorsToIgnore&&i(e).closest(this.config.selectorsToIgnore).length>0)return!1;var n=!t;return!n||!this.isAriaHidden(e)}return!1},e.prototype.shouldCareAboutContrast=function(e){if(this.config.ignoreDropboxCommon){var t=["rgb(40, 149, 241)","rgb(0, 126, 229)"];if("A"===e.tagName||"BUTTON"===e.tagName){var n=window.getComputedStyle(e).color||"";if(-1!==t.indexOf(n))return!1}if(i(e).closest("#main-nav").length)return!1}return!0},e.prototype.find=function(e,t){var n=this,r=i(this.config.root).find(e).filter(function(e,i){return n.shouldInclude(i,t)});return r.toArray()},e.prototype.findOne=function(e,t){var n=this.config.root.querySelector(e);return this.shouldInclude(n,t)?n:null},e.prototype.getHTML=function(e,t){var n=e.outerHTML.replace(/  +/g," ").replace(/ data-js-component-id="[\w]+"/,"").replace(/ data-reactid="[\.\w$]+"/,""),i=n.length;if(t&&i>t){var r=t/2;return n.substr(0,r)+"[...omitted output...]"+n.substr(i-r)}return n},e.prototype.trimText=function(e){var t=(e||"").trim();return t.length?t:null},e.prototype.getAccessibleName=function(e){return n.commons.text.accessibleText(e)},e}(),u=function(){function e(e){var t=a[e];this.ruleName=e,this.description=t&&t.description||"",this.level=t&&t.level||null,t&&t.linkURL&&t.linkText&&(this.link={url:t.linkText,text:t.linkText}),this.elements=[]}return e.prototype.addElement=function(e){e&&this.elements.indexOf(e)<0&&this.elements.push(e)},e}();t.AxAuditResult=u;var c=function(){function e(e){this.AxRulesByAuditCheckName={checkAnchors:["anchorWithoutHref","anchorWithHashHref","controlWithoutText","unclearLinkText"],checkButtons:["controlWithoutText"],checkContrast:["lowColorContrast"],checkDocument:["documentMissingTitle","documentMissingLanguage"],checkInputs:["inputWithoutLabel"],checkLabels:["labelWithoutInput"],checkGroupedInputs:["ungroupedInput"],checkImages:["imageWithoutAlt"],checkHeadings:["missingH1","skipLevelHeading"],checkTabIndices:["positiveTabIndex"],checkTables:["tableWithoutHeaders"]},this.config=new s(e||{}),this.headings=[],this.errors={},this.helper=new l(this.config)}return e.runAuditWithConfiguration=function(t){var n=new e(t);if(n.config.rulesToCheck)for(var i=0,r=Object.keys(n.AxRulesByAuditCheckName);i<r.length;i++){var o=r[i],a=n.AxRulesByAuditCheckName[o];if("checkHeadings"===o&&n.config.includeHeadings){n.runAuditCheck(o);break}for(var s=0;s<a.length;s++)if(-1!==n.config.rulesToCheck.indexOf(a[s])){n.runAuditCheck(o);break}}else Object.keys(n.AxRulesByAuditCheckName).forEach(function(e){n.runAuditCheck(e)});return n},e.runAudit=function(t){var n=e.runAuditWithConfiguration(t);return n.getAuditResultReport()},e.runSeleniumAudit=function(t){var n=e.runAuditWithConfiguration(t);return n.getSeleniumResultReport()},e.prototype.runAuditCheck=function(e){"function"==typeof this[e]&&this[e]()},e.prototype.shouldCheckRule=function(e){return this.config.rulesToCheck?-1!==this.config.rulesToCheck.indexOf(e):!0},e.prototype.getSeleniumResultReport=function(){var e=this,t=[];return Object.keys(this.errors).forEach(function(n){var i=e.errors[n],r=i.elements.map(function(t){return e.helper.getHTML(t,300)});t.push([i.ruleName,i.description,i.level,r])}),t},e.prototype.getAuditResultReport=function(){var e=this,t={fail:[],warning:[],pass:[],skip:[],headings:[]};return Object.keys(a).forEach(function(n){var i=e.errors[n];i?i.level===o.WARNING?t.warning.push(i):t.fail.push(i):e.shouldCheckRule(n)?t.pass.push(new u(n)):t.skip.push(new u(n))}),this.config.includeHeadings&&(t.headings=this.headings),t},e.prototype.registerFailure=function(e){this.shouldCheckRule(e)&&!this.errors[e]&&(this.errors[e]=new u(e))},e.prototype.registerFailureForElements=function(e,t){var n=this;t&&t.length&&this.shouldCheckRule(e)&&(this.errors[e]||(this.errors[e]=new u(e)),t.forEach(function(t){n.errors[e].addElement(t)}))},e.prototype.checkDocument=function(){if(this.config.root===document){var e=this.helper.trimText(document.querySelector("head title").textContent);e||this.registerFailure("documentMissingTitle");var t=document.getElementsByTagName("html")[0],n=this.helper.trimText(t.getAttribute("lang")),i=this.helper.trimText(t.getAttribute("xml:lang"));n||i||this.registerFailure("documentMissingLanguage")}},e.prototype.checkContrast=function(){var e=this,t=new r.AuditConfiguration({auditRulesToRun:["lowContrastElements"],scope:this.config.root,showUnsupportedRulesWarning:!1});if(this.config.ignoreDropboxCommon){var n=["#main-nav .sprite-text-inner","#page-footer",".button-as-link",".button-primary",".button-secondary",".freshbutton-blue",".ax-visually-hidden",".c-loader"].join();t.ignoreSelectors("lowContrastElements",n)}var i=r.Audit.run(t)[0];if("FAIL"===i.result){var o=[];return i.elements.forEach(function(t){e.helper.shouldInclude(t)&&e.helper.shouldCareAboutContrast(t)&&o.push(t)}),this.registerFailureForElements("lowColorContrast",o)}},e.prototype.checkAnchors=function(){for(var e=[],t=[],n=[],i=[],r=this.helper.find("a"),o=0;o<r.length;o++){var a=r[o],s=this.helper.trimText(a.getAttribute("href"));s?"#"!==s||a.getAttribute("role")||e.push(a):a.getAttribute("role")&&a.getAttribute("tabindex")||t.push(a);var l=this.helper.getAccessibleName(a);if(l){var u=["here","click here","more","learn more","about"];u.indexOf(l.toLowerCase().trim())>-1&&(this.config.ignoreDropboxCommon&&s&&s.indexOf("/about")>-1||i.push(a))}else n.push(a)}this.registerFailureForElements("anchorWithoutHref",t),this.registerFailureForElements("anchorWithHashHref",e),this.registerFailureForElements("controlWithoutText",n),this.registerFailureForElements("unclearLinkText",i)},e.prototype.checkButtons=function(){var e=this,t=[],n=this.helper.find('button, [role="button"], input[type="submit"], input[type="button"]');n.forEach(function(n){e.helper.getAccessibleName(n)||t.push(n)}),this.registerFailureForElements("controlWithoutText",t)},e.prototype.checkInputs=function(){var e=this,t=[],n=this.helper.find('input:not([type="submit"]):not([type="button"]), select, textarea');n.forEach(function(n){e.helper.getAccessibleName(n)||e.config.ignoreDropboxCommon&&0!==i(n).closest(".moxie-shim").length||t.push(n)}),this.registerFailureForElements("inputWithoutLabel",t)},e.prototype.checkLabels=function(){var e=["button","input","meter","output","progress","select","textarea"],t=this.helper.find("label"),n=[];t.forEach(function(t){if(t.hasAttribute("for")){var i=document.getElementById(t.getAttribute("for")||""),r=i&&-1!==e.indexOf(i.tagName.toLowerCase());r||n.push(t)}else t.querySelector(e.join(","))||n.push(t)}),this.registerFailureForElements("labelWithoutInput",n)},e.prototype.checkGroupedInputs=function(){var e=this.helper.find('input[type="checkbox"], input[type="radio"]'),t={},n=[];e.forEach(function(e){var i=e.getAttribute("name");i?(t[i]=t[i]||[],t[i].push(e)):"radio"===e.getAttribute("type")&&n.push(e)}),Object.keys(t).forEach(function(e){var r=t[e];r.length>1&&r.forEach(function(e){var t=i(e).closest("fieldset").length>0;t||n.push(e)})}),this.registerFailureForElements("ungroupedInput",n)},e.prototype.checkImages=function(){var e=this.helper.find('img:not([alt]):not([aria-hidden="true"]):not([role="presentation"])');this.registerFailureForElements("imageWithoutAlt",e)},e.prototype.checkHeadings=function(){var e=this,t=this.helper.find("h1",!0);0===t.length&&this.registerFailure("missingH1");var n=this.helper.find('h1,h2,h3,h4,h5,h6,*[role="heading"][aria-level]'),r=[],o=[];n.forEach(function(e){var t;t="heading"===e.getAttribute("role")?parseInt(e.getAttribute("aria-level"),10):parseInt(e.nodeName[1],10),r.push({level:t,element:e})});var a=0;return r.forEach(function(t){t.level>a+1&&(e.config.ignoreDropboxCommon&&i(t.element).hasClass("db-modal-title")||o.push(t.element)),a=t.level}),this.config.includeHeadings&&(this.headings=r),this.registerFailureForElements("skipLevelHeading",o)},e.prototype.checkTabIndices=function(){var e=this.helper.find('[tabindex]:not([tabindex="0"]):not([tabindex="-1"])');return this.registerFailureForElements("positiveTabIndex",e)},e.prototype.checkTables=function(){var e=this.helper.find("table"),t=[];e.forEach(function(e){e.querySelector("tr th")||t.push(e)}),this.registerFailureForElements("tableWithoutHeaders",t)},e}();t.AxAudit=c}),function(){define("modules/clean/expose/panel",["external/classnames","external/react","modules/clean/expose/services","modules/clean/flux/store_mixin","modules/clean/react/css"],function(e,t,n,i,r){var o,a,s;return o=n.ExposeActions,s=n.ExposeStore,a=t.createClass({displayName:"ExposePanel",mixins:[t.addons.PureRenderMixin,i(s)],_get_state_from_stores:function(){return{isEnabled:s.shouldDisplayAnnotations(),isVisible:s.shouldDisplayPanel()}},_toggleAnnotationsHandler:function(){return this.state.isEnabled?o.disableAnnotations():o.enableAnnotations()},render:function(){var n;return n={"expose-panel":!0,"expose-panel--enabled":this.state.isEnabled},this.state.isVisible?t.createElement("div",{className:e(n)},t.createElement("button",{className:"expose-panel__toggle",onClick:this._toggleAnnotationsHandler},"Enable experiment annotations")):null}}),a=r(a,["/static/css/expose/panel-vflNzNuGL.css"])})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("modules/clean/expose/services",["external/immutable","modules/clean/ajax","modules/clean/flux/base_store","modules/clean/flux/dispatcher","modules/core/browser"],function(t,n,i,r,o){var a,s,l,u,c,h,d,p;return c=n.WebRequest,u=t.Map,a={UPDATE_ANNOTATIONS:"EXPOSE_UPDATE_ANNOTATIONS",UPDATE_BOUNDARIES:"EXPOSE_UPDATE_BOUNDARIES",SHOW_ANNOTATIONS:"EXPOSE_SHOW_ANNOTATIONS",HIDE_ANNOTATIONS:"EXPOSE_HIDE_ANNOTATIONS",ENSURE_PANEL:"EXPOSE_ENSURE_PANEL",ENSURE_NO_PANEL:"ENSURE_NO_PANEL"},p=function(e,t){var n,i,r,a,s,l;return n=decodeURIComponent(o.get_href()),s=new RegExp("[\\?&]stormcrow_override="+e+"([^&#]*)"),l=s.exec(n),l?(i=l[0],r=n.replace(i,i.replace(/:.*/,":"+t))):(a=n.split("?")[1]?"&":"?",r=""+n+a+"stormcrow_override="+e+":"+t),o.redirect(r)},d=function(e){return c({url:"/admin/stormcrow/features/name/"+e,type:"GET",dataType:"json"})},h=function(e){var t,n;return(t=document.querySelector("[data-exp-id='"+e+"']"))?(n=t.getBoundingClientRect(),{left:n.left+window.scrollX,top:n.top+window.scrollY,width:n.right-n.left,height:n.bottom-n.top}):void 0},s=function(){function e(){}return e.prototype.updateAnnotations=function(e){var t;return t=Object.keys(e).length,t?(r.dispatch({type:a.UPDATE_ANNOTATIONS,data:e}),r.dispatch({type:a.ENSURE_PANEL})):r.dispatch({type:a.ENSURE_NO_PANEL})},e.prototype.updateBoundaries=function(e){var t,n,i,o,s;for(n={},i=0,s=e.length;s>i;i++)o=e[i],t=h(o),t?n[o]=t:delete n[o];return r.dispatch({type:a.UPDATE_BOUNDARIES,data:n})},e.prototype.enableAnnotations=function(){return r.dispatch({type:a.SHOW_ANNOTATIONS})},e.prototype.disableAnnotations=function(){return r.dispatch({type:a.HIDE_ANNOTATIONS})},e}(),l=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype._init=function(){return this._featureIdMap=u(),this._boundaryIdMap=u(),this._shouldDisplayAnnotations=!1,this._shouldDisplayPanel=!1},i.prototype._setFeatureIdMap=function(e){return this._featureIdMap=u(e).map(function(e){return u(e)}),this.emit_change()},i.prototype._updateBoundaryIdMap=function(e){var n;return n=this._boundaryIdMap,this._boundaryIdMap=u(e).map(function(e,i){var r,o;return o=n.get(i),r=u(e),t.is(o,r)?o:r}),t.is(n,this._boundaryIdMap)?void 0:this.emit_change()},i.prototype._showAnnotations=function(){return this._shouldDisplayAnnotations=!0,this.emit_change()},i.prototype._hideAnnotations=function(){return this._shouldDisplayAnnotations=!1,this.emit_change()},i.prototype._ensurePanel=function(){return this._shouldDisplayPanel=!0},i.prototype._ensureNoPanel=function(){return this._shouldDisplayPanel=!0},i.prototype.getFeatureIdMap=function(){return this._featureIdMap},i.prototype.getBoundaryIdMap=function(){return this._boundaryIdMap},i.prototype.shouldDisplayAnnotations=function(){return this._shouldDisplayAnnotations},i.prototype.shouldDisplayPanel=function(){return this._shouldDisplayPanel},i.prototype._new_payload=function(e){var t;switch(t=e.action.data,e.action.type){case a.UPDATE_ANNOTATIONS:return this._setFeatureIdMap(t);case a.UPDATE_BOUNDARIES:return this._updateBoundaryIdMap(t);case a.SHOW_ANNOTATIONS:return this._showAnnotations();case a.HIDE_ANNOTATIONS:return this._hideAnnotations();case a.ENSURE_PANEL:return this._ensurePanel();case a.ENSURE_NO_PANEL:return this._ensureNoPanel()}},i}(i),{ExposeActions:new s,ExposeStore:new l,getStormcrowVariantsForFeature:d,setStormcrowUrlOverride:p}})}.call(this);var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("modules/clean/react/accessibility_audit_tool",["require","exports","external/react","modules/clean/accessibility/audit","modules/clean/react/bubble_dropdown","modules/clean/react/flag","modules/clean/react/sprite","modules/clean/react/tabs/tab_util","modules/clean/react/tabs/tabs"],function(e,t,n,i,r,o,a,s,l){"use strict";var u=function(e){function t(t){e.call(this,t),this.state={filter:"all",onlyVisible:!0,ignoreDropboxCommon:!0},this.runAudit=this.runAudit.bind(this),this.handleFilterChange=this.handleFilterChange.bind(this),this.toggleVisible=this.toggleVisible.bind(this),this.toggleDropbox=this.toggleDropbox.bind(this)}return __extends(t,e),t.prototype.componentWillMount=function(){return this.runAudit(!0)},t.prototype.runAudit=function(e){var t;e&&(t=["anchorWithoutHref","anchorWithHashHref","controlWithoutText","imageWithoutAlt","inputWithoutLabel","labelWithoutInput","ungroupedInput","positiveTabIndex","missingH1","skipLevelHeading","unclearLinkText","tableWithoutHeaders","documentMissingLanguage","documentMissingTitle"]);var n=i.AxAudit.runAudit({includeHeadings:!0,ignoreDropboxCommon:this.state.ignoreDropboxCommon,selectorsToIgnore:".ax-audit__dialog",onlyVisible:this.state.onlyVisible,rulesToCheck:t});return this.setState({results:n})},t.prototype.toggleVisible=function(){return this.setState({onlyVisible:!this.state.onlyVisible})},t.prototype.toggleDropbox=function(){return this.setState({ignoreDropboxCommon:!this.state.ignoreDropboxCommon})},t.prototype.handleFilterChange=function(e){return this.setState({filter:e.target.value})},t.prototype.renderButton=function(){if(this.state.results){var e,t=this.state.results.fail.length,i=this.state.results.warning.length,r=t+i;e=0===r?"No types of accessibility issues found":1===r?r+" type of accessibility issues found":r+" types of accessibility issues found";var o=t>0?"ax-audit__button--fail":"",a=n.createElement("span",{className:"ax-audit__error-decorator"},n.createElement("span",{"aria-hidden":"true"},"(",r,")"),n.createElement("span",{className:"ax-visually-hidden"},e));return n.createElement("button",{className:"ax-audit__button u-pad-xxs "+o,title:e},n.createElement("span",{className:"ax-visually-hidden"},"Accessibility Status"),n.createElement("span",{"aria-hidden":"true"},"AX"),a)}},t.prototype.renderFail=function(e){var t="fail"===this.state.filter||"all"===this.state.filter;return t&&e.fail?e.fail.map(function(e){return n.createElement(c,{status:"fail",result:e,key:e.ruleName})}):null},t.prototype.renderWarning=function(e){var t="warning"===this.state.filter||"all"===this.state.filter;return t&&e.warning?e.warning.map(function(e){return n.createElement(c,{status:"warning",result:e,key:e.ruleName})}):null},t.prototype.renderPass=function(e){var t="pass"===this.state.filter||"all"===this.state.filter;return t&&e.pass?e.pass.map(function(e){return n.createElement(c,{status:"pass",result:e,key:e.ruleName})}):null},t.prototype.renderSkip=function(e){var t="all"===this.state.filter;return e.skip&&t?e.skip.map(function(e){return n.createElement(c,{status:"skip",result:e,key:e.ruleName})}):null},t.prototype.renderResults=function(e){return n.createElement(l.Tabs,{variant:s.variants.UNDERLINE},this.renderAuditTab(e),this.renderHeadingsTab(e),this.renderConfigurationTab())},t.prototype.renderAuditTab=function(e){return n.createElement(l.TabContent,{title:"Results"},n.createElement("div",null,n.createElement("label",{htmlFor:"ax-audit__filter",className:"ax-audit__filter-label"},"Filter Results"),n.createElement("select",{id:"ax-audit__filter",onChange:this.handleFilterChange},n.createElement("option",{value:"all"},"All"),n.createElement("option",{value:"fail"},"Failing"),n.createElement("option",{value:"warning"},"Warning"),n.createElement("option",{value:"pass"},"Passing")),n.createElement("p",null,"Click 'Show Errors' next to a rule to see a red outline around visible failing elements. Check the Javascript console for a full list of elements that fail a given accessibility check."),n.createElement("ul",{className:"ax-audit__list",ref:"auditList"},this.renderFail(e),this.renderWarning(e),this.renderPass(e),this.renderSkip(e))))},t.prototype.renderHeadingsTab=function(e){var t;return t=e.headings.length?n.createElement("div",null,n.createElement("p",null,"Does the following heading order detected for this page reflect the visual hierarchy?"),n.createElement("ul",{className:"ax-audit__heading-list"},e.headings.map(function(e,t){return n.createElement("li",{className:"ax-audit__heading-item",key:"heading"+t},n.createElement("b",null,e.level,":")," ",e.element.textContent)}))):n.createElement("p",null,"No headings were detected on this page! Yikes!"),n.createElement(l.TabContent,{title:"Headings"},t,n.createElement("p",null,"Every page should have a logical heading order. Not only is this semantic HTML, but it helps screenreader users navigate. Always prefer using H1 - H6 elements over other HTML elements styled to look like headings."))},t.prototype.renderConfigurationTab=function(){var e=n.createElement("input",{type:"checkbox",id:"ax-audit__visibleToggle",onChange:this.toggleVisible,checked:this.state.onlyVisible}),t=n.createElement("input",{type:"checkbox",onChange:this.toggleDropbox,checked:this.state.ignoreDropboxCommon,id:"ax-audit__dropboxToggle","aria-describedby":"ax-audit__dropboxToggleDescription"});return n.createElement(l.TabContent,{title:"Settings"},n.createElement("fieldset",{className:"ax-audit__configuration"},n.createElement("legend",null,"Configure accessibility checks"),n.createElement(o,{alignment:"top",spacing:"xs",leftAttachment:e},n.createElement("label",{htmlFor:"ax-audit__visibleToggle"},"Ignore hidden elements")),n.createElement(o,{alignment:"top",spacing:"xs",leftAttachment:t},n.createElement("div",null,n.createElement("label",{htmlFor:"ax-audit__dropboxToggle"},"Ignore wide-reaching issues"),n.createElement("div",{id:"ax-audit__dropboxToggleDescription"},"(These are issues that tend to affect multiple areas of the product and cannot easily be addressed with a single bug fix, such as the low contrast of the default blue link color.)")))),n.createElement("p",null,"In addition to these automated checks, make sure to manually verify that you can activate every clickable element with just your keyboard."))},t.prototype.render=function(){var e=this,t=function(){e.runAudit(!1)};return n.createElement(r,{arrow_position:"bottom-right",targetButton:this.renderButton(),shouldDisableBubbleDropdownHideOnResize:!1,closeBubbleDropdownOnWindowScroll:!1,bubbleDropdownScrollable:!0,targetFixed:!0,bubbleDropdownShown:t},n.createElement("div",{className:"ax-audit__dialog"},n.createElement("h2",null,"Accessibility Status"),n.createElement("p",null,"Check the accessibility of the current page with our automated accessibility tool."),n.createElement("button",{className:"ax-audit__run-button button-tertiary",onClick:t},"Re-run accessibility checks"),this.state.results?this.renderResults(this.state.results):"Loading results...",n.createElement("p",{className:"ax-audit__footer"},"Questions? ",n.createElement("a",{href:"https://paper.dropbox.com/doc/Web-Accessibility-Test-Tools-ifoQaNPagOW3LmMfGSJ0b",target:"_blank"},"Read our documentation")," or contact ",n.createElement("b",null,"ask-accessibility@"),".")))},t}(n.Component);t.AxAuditTool=u;var c=function(e){function t(t){e.call(this,t),this.state={errorsShown:!1},this.handleToggleErrorClick=this.handleToggleErrorClick.bind(this)}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.state.errorsShown&&this.props.result.elements!==e.result.elements&&(this.toggleVisualHighlight(this.props.result.elements,!1),this.toggleVisualHighlight(e.result.elements,!0))},t.prototype.componentWillUnmount=function(){return this.state.errorsShown?this.toggleVisualHighlight(this.props.result.elements,!1):void 0},t.prototype.toggleVisualHighlight=function(e,t){if(null!=e)for(var n=0,i=e.length;i>n;n++){var r=e[n];t?(r.setAttribute("ax-audit__old-outline",r.style.outline||""),r.style.outline="3px solid red",r.setAttribute("ax-audit__error",this.props.result.ruleName)):(r.style.outline=r.getAttribute("ax-audit__old-outline"),r.removeAttribute("ax-audit__old-outline"),r.removeAttribute("ax-audit__error"))}},t.prototype.handleToggleErrorClick=function(e){var t=!this.state.errorsShown;return this.toggleVisualHighlight(this.props.result.elements,t),t&&console.warn("[Accessibility "+this.props.result.level+"] "+("These elements fail: "+this.props.result.ruleName+" ("+this.props.result.description+"):"),this.props.result.elements),this.setState({errorsShown:t})},t.prototype.renderIcon=function(){var e,t;switch(this.props.status){case"pass":e="bulletpoint-check",t="Passing";break;case"warning":e="cancel",t="Warning";break;case"fail":e="bulletpoint-x",t="Failing";break;default:e="info",t="Skipped"}return n.createElement(a,{group:"web",name:e,alt:t,title:t})},t.prototype.render=function(){var e,t=this.props.result;t.link&&(e=n.createElement("a",{href:t.link.url,target:"_blank"},t.link.text));var i,r="";return["warning","fail"].indexOf(this.props.status)&&t.elements.length&&(r="("+t.elements.length+")",i=n.createElement("button",{className:"ax-audit__item__toggle button-as-link",onClick:this.handleToggleErrorClick,"aria-describedby":"ax-audit-"+t.ruleName},this.state.errorsShown?"Hide Errors":"Show Errors")),n.createElement("li",{className:"ax-audit__item ax-audit__item--"+(this.props.status||"na")},n.createElement(o,{alignment:"top",spacing:"xs",leftAttachment:this.renderIcon()},n.createElement("div",null,n.createElement("h3",{id:"ax-audit-"+t.ruleName,className:"ax-audit__item__heading"},t.ruleName," ",r),i,n.createElement("p",null,t.description," ",e))))},t}(n.Component);t.AxAuditToolRow=c}),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("modules/clean/stormcrow/stormcrow_panel_link",["external/react","modules/core/browser"],function(t,n){var i;return i=function(i){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.reloadWithStormcrow=function(){var e;return e=n.get_uri().updateQuery("stormcrow_panel","1"),n.redirect(e.toString())},r.prototype.render=function(){return t.createElement("a",{href:"#",onClick:this.reloadWithStormcrow,title:"Reloads the current page with Stormcrow logging enabled"},"Stormcrow panel")},r}(t.Component),{StormcrowPanelLink:i}})}.call(this),define("modules/pagelet_config",["require","exports","module"],function(e,t,n){"use strict";t.REQUIREJS_CONFIG=n.config().REQUIREJS_CONFIG});
//# sourceMappingURL=pkg-bb.min.js-vfl4Q3wHj.map